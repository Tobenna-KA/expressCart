{{> themes/MarieLyne/front-menu}}
<div class="container">
  <div class="row">

    <div class="col-lg-3">

      <h1 class="my-4">{{@root.config.cartTitle}}</h1>
      <div class="list-group">
        <a href="#" class="list-group-item">Category 1</a>
        <a href="#" class="list-group-item">Category 2</a>
        <a href="#" class="list-group-item">Category 3</a>
      </div>

    </div>

    <!-- SHOW IF NO PRODUCTS -->
    {{#ifCond results.length '==' 0}}
      <div class="col-lg-9">
        <p class="text-danger">{{ @root.__ "No products found" }}</p>
      </div>
    {{/ifCond}}
    <div class="col-lg-9">

      <div class="row">
        {{!-- LOOP THROUGH PRODUCTS --}}
        {{#each results}}
          <div class="col-lg-4 col-md-6 mb-4">
            <div class="card h-100">
              {{#if productPermalink}}
                <a href="/product/{{this.productPermalink}}">
                  {{#if productImage}}
                    <img class="card-img-top" src="{{this.productImage}}" alt="">
                  {{else}}
                    <img class="card-img-top" src="/uploads/placeholder.png" alt="">
                  {{/if}}
                </a>
              {{else}}
                <a href="/product/{{this._id}}">
                  {{#if productImage}}
                    <img class="card-img-top" src="{{this.productImage}}" alt="">
                  {{else}}
                    <img class="card-img-top" src="/uploads/placeholder.png" alt="">
                  {{/if}}
                </a>
              {{/if}}
              {{#if variants}}
                <div class="card-body">
                  <h4 class="card-title">
                    {{#if productPermalink}}
                      <a href="/products/{{this.productPermalink}}">
                        {{this.productTitle}}
                      </a>
                    {{else}}
                      <a href="/products/{{this._id}}">
                        {{this.productTitle}}
                      </a>
                    {{/if}}
                  </h4>
                  {{#if @root.config.showHomepageVariants}}
                    <select 
                      id="productVariant-{{this._id}}" 
                      class="productVariant form-control mb-2"
                    >
                      {{#each variants}}
                        <option 
                          value="{{this._id}}" 
                          data-price="{{this.price}}"
                        >
                          {{this.title}} - {{currencySymbol @root.config.currencySymbol}}{{this.price}}
                        </option>
                      {{/each}}
                    </select>
                  {{else}}
                    <h4 class="product-price mp-0 text-center">
                      {{currencySymbol @root.config.currencySymbol}}{{formatAmount variants.0.price}}
                    </h4>
                  {{/if}}
                  {{!-- <p class="card-text">
                    {{this.productDescription}}
                  </p> --}}
                </div>
              {{else}}
                <div class="card-body">
                  <h4 class="card-title">
                    {{#if productPermalink}}
                      <a href="/products/{{this.productPermalink}}">
                        {{this.productTitle}}
                      </a>
                    {{else}}
                      <a href="/products/{{this._id}}">
                        {{this.productTitle}}
                      </a>
                    {{/if}}
                  </h4>
                  <h4 class="product-price mp-0">
                    {{currencySymbol @root.config.currencySymbol}}{{formatAmount productPrice}}
                  </h4>
                </div>
              {{/if}}
              <div class="card-footer">
                {{#if @root.config.showHomepageVariants}}
                  <a 
                    class="btn btn-white add-variant-to-cart" 
                    data-id="{{this._id}}" 
                    role="button"
                  >
                    <ion-icon name="cart"></ion-icon>
                  </a>
                {{else}}
                  <a 
                    class="btn btn-white add-to-cart" 
                    data-id="{{this._id}}" 
                    data-link="{{this.productPermalink}}" 
                    data-has-variants="{{checkProductVariants this.variants}}" 
                    role="button"
                  >
                    <ion-icon name="cart"></ion-icon>
                  </a>
                {{/if}}
              </div>
            </div>
          </div>
        {{/each}}

      </div>
      <!-- /.row -->

    </div>
    <!-- /.col-lg-9 -->

  </div>
</div>
{{> themes/MarieLyne/footer}}